<?xml version='1.0' encoding='UTF-8'?>

<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" []>
<chapter>
  <title>Elementos de datos y dimensiones personalizados</title>
  <para>En este capítulo comenzaremos discutiendo una base importante del sistema: el elemento de datos. A continuación veremos el modelo de categorías y cómo puede usarse para lograr una estructura muy personalizada de metadatos para almacenar los datos.</para>
  <section>
    <title>Elementos de datos</title>
    <para>El elemento de datos es, junto con la unidad organizativa, el bloque más importante de la base de datos de DHIS 2. Representa la dimensión qué y explica qué es lo que se registra y analiza. En algunos contextos ponen al indicador en este lugar, sin embargo en DHIS 2 este elemento de metadatos para el registro y análisis de los datos es lo que llamamos elemento de datos. El elemento de datos frecuentemente representa el conteo de algún evento y su nombre describe qué es lo que se cuenta, por ejemplo &quot;Dosis entregadas BCG&quot; o &quot;Casos de Malaria&quot;. Cuando se recopilan, validan, analizan o presentan los datos, son los elementos de datos o las expresiones construidas con elementos de datos los que describen sobre qué fenómeno, evento o caso se registran datos. Por ello el elemento de datos toma importancia en todos los aspectos del sistema y decide no sólo cómo se colectan los datos sino, todavía más importante, cómo se representan los datos en la base de datos y cómo pueden analizarse y presentarse los datos.</para>
    <para>Un principio importante tras el diseño de elementos de datos es pensar en elementos de datos como descripciones autocontenidas de un fenómeno o evento y no como un campo del formulario de entrada de datos. Cada elemento de dato existe autónomamente en la base de datos, completamente separado e independiente del formulario de registro. Es importante considerar que los elementos de datos se usan directamente en los reportes, gráficas y otras herramientas de análisis de datos, en los cuales el contexto de cualquier formulario de entrada de datos no es accesible ni relevante. En otras palabras, debe ser posible identificar claramente qué evento representa un elemento de dato solo con mirar su nombre. Basándonos en esto podemos derivar una regla práctica si decimos que el nombre del elemento de dato debe poder mantenerse por sí mismo y describir el valor del dato también fuera del contexto de su formulario de registro.</para>
    <para>Pongamos por caso un elemento de dato llamado "Malaria", que sería preciso visto en un formulario de entrada de datos que captura datos de inmunización, en un formulario de registro de stocks de vacunas o en un formulario de datos de pacientes no ingresados. Cuando lo vemos en un reporte, sin embargo, fuera del contexto del formulario, es imposible saber a qué evento representa este elemento de dato. Si el elemento de dato se hubiera llamado "Casos de Malaria", "Dosis recibidas del stock de Malaria" o "Dosis entregadas de Malaria" estaría claro desde la perspectiva de cualquier usuario qué es lo que el reporte está tratando de expresar. En este caso estamos tratando con tres elementos de datos diferentes con semánticas completamente distintas.</para>
  </section>
  <section>
    <title>Categorías y dimensiones personalizadas</title>
    <para>Hay determinados requisitos en la captura de datos que necesitan una definición más ajustada de la dimensión que describe el evento contabilizado. Por ejemplo, si queremos registrar el número de "Casos de Malaria" subdivididos en género y grupos de edad, como "femenino", "masculino" y "&lt; 5 años" y "&gt; 5 años". Lo que caracteriza esto es que la subdivisión generalmente se repite para un número de elementos de datos "base": digamos que queremos reutilizar esta subdivisión para otros elementos de datos como "TB" y "VIH". Para hacer los metadatos más dinámicos, reutilizables y adecuados para el análisis tiene sentido definir las enfermedades mencionadas como elementos de datos y crear un modelo separado para los atributos de subdivisión. Podemos conseguir esto utilizando el modelo de categorías que se describe a continuación.</para>
    <para>El modelo de categorías tiene tres elementos principales que se describen mejor usando el ejemplo anterior:</para>
    <orderedlist>
      <listitem>
        <para>La opción de categoría, que corresponde a "femenino", "masculino" y "&lt; 5 años" y "&gt; 5 años".
          </para>
      </listitem>
      <listitem>
        <para>La categoría, que corresponde a "género" y "grupo de edad".</para>
      </listitem>
      <listitem>
        <para>La combinación de categorías, que podría llamarse "género y grupo de edad" en el ejemplo anterior y tendría asignadas ambas categorías mencionadas.</para>
      </listitem>
    </orderedlist>
    <para>Este modelo de categorías es de hecho autosuficiente pero en DHIS 2 está flexiblemente emparejado con el elemento de datos. Flexiblemente emparejado aquí significa que hay una asociación entre elemento de dato y combinación de categorías, pero esta asociación puede cambiar en cualquier momento sin perder ningún dato. Sin embargo, no es recomendable cambiar esto a menudo ya que quita valor a la base de datos en general porque reduce la continuidad de los datos. Notemos que no hay un límite duro en el número de opciones de categoría en una categoría o en el número de categorías en una combinación de categorías, pero hay un límite natural donde la estructura se vuelve desordenada y rígida.</para>
    <para>Es posible usar una pareja de elemento de datos y combinación de categorías para representar cualquier nivel de subdivisión. Es importante comprender que lo que en realidad está sucediendo es que estamos asignando a los datos una cierta cantidad de dimensiones personalizadas. Al igual que el elemento de dato representa una dimensión obligaroria de los valores de datos, las categorías le añaden a su vez dimensiones personalizadas. En el ejemplo anterior podemos hacer un análisis mediante las herramientas de salida de DHIS2 basándonos tanto en "género" como en "grupos de edad" para esos elementos de datos, de la misma forma en que podemos realizar análisis basándonos en elementos de datos, unidades organizativas y periodos.</para>
    <para>Este modelo de categorías puede utilizarse tanto en el diseño de formularios de entrada de datos como en el análisis y los reportes de tables. Para los propósitos de análisis, DHIS 2 puede producir automáticamente subtotales y totales de cada elemento de dato asociado a una combinación de categorías. La norma para este cálculo es que todas las opciones de categoría deberían sumar un total significativo. El ejemplo anterior muestra un total significativo ya que al resumir "Casos de Malaria" registrados para "femenino &lt; 5 años" y "masculino &lt; 5 años", "femenino &gt; 5 años" y "masculino &gt; 5 años" obtendremos el número total de "Casos de Malaria".</para>
    <para>Para el propósito de la captura de datos, DHIS 2 puede generar automáticamente formularios de entrada de datos tabulares donde los elementos de datos se representen como filas y las combinaciones de opciones de categoría se representen como columnas. Esto nos llevará en muchos casos a completar formularios con un esfuerzo mínimo. Por ejemplo, puede suceder que queramos crear rápidamente formularios de entrada de datos utilizando categorías que no se adhieren a la norma de total significativo. Aún así, nosotros consideramos esto una alternativa mejor que mantener dos modelos independientes y separados para la entrada y la salida de datos.</para>
    <para>Un punto importante sobre el modelo de categorías es que los valores de los datos persisten y se asocian con una combinación de opciones de categoría. Esto implica que añadir o eliminar categorías de una combinación de categorías renderiza estas combinaciones de forma inválida y deben realizarse operaciones de bajo nivel con la base de datos para corregirlas. Por ello es recomendable considerar premeditadamente qué subdivisiones son necesarias y no cambiarlas con demasiada frecuencia.</para>
  </section>
  <section>
    <title>Grupos de elementos de datos</title>
    <para>Podemos modelar las propiedades comunes de los elementos de datos mediante lo que llamamos grupos de elementos de datos. Los grupos son completamente flexibles en el sentido de que son definidos por el usuario, tanto sus nombres como sus agrupaciones. Los grupos son útiles para navegar y presentar los datos, y también pueden usarse para agregar los valores capturados para los elementos de datos en el grupo. Los grupos están flexiblemente emparejados con elementos de datos y no ligados directamente a los valores de los datos, lo que significa que pueden ser modificados y añadidos en cualquier momento sin interferir en los datos de bajo nivel.</para>
  </section>
</chapter>
