<? Xml version = '1 .0 'encoding =' UTF-8 "?> 
<! - Ce document a été créé avec Syntext Serna libre. -> 
<! DOCTYPE chapitre PUBLIC "- / / OASIS / / DTD DocBook XML V4.4 / / EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" [>] 
<chapter> 
  <title> SIG </title> 
  <section> 
    <title> OpenHealthMapper </title> 
    <para>  Le module DHIS2 du SIG est inspiré par l'application de l'OMS HealthMapper. </para> 
  </section>
  <section> 
    <title> Carte identifiant données <title/> 
    <para> données géographiques peuvent être divisés en deux groupes - matricielles et vectorielles. </Para> 
    <section> 
      <title> Raster images </title> 
      <para> matricielles peuvent être considérées comme des images telles que des images satellite. Les images peuvent être utilisées comme base pour les cartes, et de l'ohm peut les retirer à partir de n'importe conforme aux standards 
      <link xl:href="http://en.wikipedia.org/wiki/Web_Map_Service"> Web Map Service (WMS) </link>. Il est également un grand intérêt pour 
      combiner l'installation d'un DHIS2 <link xl:href="http://geoserver.org/display/GEOS/Welcome"> GeoServer instance</link>, 
      qui peut être téléchargé au format. guerre fichier et lancez dans le même conteneur de servlets (par exemple, Tomcat, Jetty, résine). GeoServer peut fournir 
      les deux couches de fond telles que les routes, lacs, etc ou encore afficher les données thématiques comme une alternative au navigateur-rendu 
      mode principal qui utilise> GeoJSON. </para> 
</section> 
    <section> 
      <title> Vecteur de données </title> 
      <para> Afin de créer des cartes thématiques (également connu sous le nom <link xl:href="http://en.wikipedia.org/wiki/Choropleth_map"> choroplèthe </maps / ulink>) 
    Nous avons besoin de polygones vecteur (par exemple pour les bassins versants installation ou régions administratives). En outre, les fichiers vectoriels sont nécessaires pour 
    points (par exemple l'emplacement des installations de santé ou même de différents services au sein d'un hôpital). Ces fichiers vectoriels compose d'une collection de (x, y) 
    coordonnées avec un certain nombre d'attributs associés (au moins un nom). Les données vectorielles peuvent venir dans un grand nombre de formats, tels que le GPS 
    coordonnées pour les installations. Le plus commun est le <link xl:href="http://en.wikipedia.org/wiki/Shapefile"> ESRI format shapefile </link>. 
    Afin de rendre les cartes Web interactives, DHIS 2 utilise le javascript <link xl:href="http://en.wikipedia.org/wiki/GeoJSON"> format GeoJSON </link>. </Para> 
</section> 
    <section> 
      <title> L'obtention de données / title> 
      <para> 
        Pour utiliser l'OHM avec DHIS2, il est nécessaire de disposer de données vectorielles pour chaque niveau orgunit l'on veut voir dans la carte. 
        Dans de nombreux pays, le ministère de la Santé ont shapefiles pour les divisions administratives liées à la santé. Dans d'autres cas, 
        de tels fichiers peut être acheté auprès d'un ministère de l'aménagement du territoire ou auprès de fournisseurs privés. Installation de coordonnées peuvent être facilement 
        assemblés en une couche (fichier) pour les installations - et si elles ne sont pas disponibles, elles peuvent être collectées par GPS à bas prix (de plus en plus 
        disponibles également dans les téléphones mobiles). En outre, beaucoup de données sont disponibles librement sur le web - en particulier des couches et des bacground 
        superpositions, mais aussi l'installation des postes et les frontières administratives. Voici une liste des sources de ces données: </para> 
      <itemizedlist> 
        <listitem> 
          <para> <link xl:href="http://www.openstreetmap.org"> OpenStreetMap </link> </para> 
        </Listitem> 
        <listitem> 
          <para> <link xl:href="http://www.openhealthconsortium.org/wiki/doku.php?id=layers_from_openstreetmap"> Manipulation de couches </link> </para> 
        </Listitem> 
        <listitem> 
          <para> <link xl:href="http://www.maplibrary.org/stacks/africa"> Maplibrary </link> </para> 
        </Listitem> 
        <listitem> 
           <para><link xl:href="http://www.gadm.org/country"> Global régions administratives </link> </para> 
        </Listitem> 
        <listitem> 
          <para> <link xl:href="http://www.unsalb.org"> organisations des Nations Unies, en particulier l'OMS et la FAO, ont administrative <frontières / ulink> </para> 
        </Listitem> 
      </Itemizedlist> 
</section> 
    <section> 
      <title> Projections</title> 
      <para> DHIS 2 utilise la latitude / longitude (Lat / Lon) les coordonnées dans la norme EPSG: 4326 de projection, qui est 
        très répandue. Mais il est également fréquent d'obtenir des données dans des formats UTM [http://en.wikipedia.org/wiki/ 
        Universal_Transverse_Mercator_coordinate_system]. Par exemple, les données pour le Malawi est souvent distribué UTM 36S 
        projection, ce qui correspond à EPSG: 2736. La conversion peut se faire par être fait en utilisant soit GeoServer ou ogr2ogr 
        qui fait partie de GDAL et est livré avec Ubuntu. Pour Windows, il s'inscrit dans le cadre de <ulink> url="http://www.bostongis.com/ PrinterFriendly.aspx?content_name=ogr_cheatsheet"> FW Outils </link>. Par exemple, la ligne suivante vous permet de convertir un shapefile 
        inputfile.shp appelé en UTM 36S projection d'un fichier GeoJSON en latitude / longitude: 
        <programlisting><userinput>s_srs ogr2ogr EPSG: 2736 a_srs EPSG: 4326-f "GeoJSON" inputfile.shp outputfile.json </userinput> </programlisting> 
      </Para> 
</section> 
    <section> 
      <title> logiciel SIG pour afficher et manipuler des données cartographiques </title> 
      <para> Il ya beaucoup de puissants libre et open source de SIG paquets. Ceux-ci peuvent être proposés: </para> 
      <itemizedlist> 
          <listitem> <para> <link xl:href="http://www.qgis.org/"> Quantum GIS </link> </para> </listitem> 
          <listitem> <para> <link xl:href="http://www.openjump.org/"> openjump </link> </para> </listitem> 
          <listitem> <para> <link xl:href="http://udig.refractions.net/"> uDig </link>, qui fait également fonction de <ulink url = "http://udig.refractions.net/gallery / GCRAI / "> DIVA-GIS </link> </para> </listitem> 
          <listitem> <para> <link xl:href="http://www.gvsig.gva.es/eng/inicio-gvsig/"> gvSIG </link> </para> </listitem> 
        </Itemizedlist> 
        <para> Ces outils peuvent par exemple être utilisé pour fusionner les polygones limites du village en polygones de district (à condition que le quartier que chaque village appartient à est répertorié comme un attribut), et 
        on peut éditer des fichiers afin de refléter de nouvelles divisions ou de corriger les erreurs. 
        Un autre outil pour travailler avec des données SIG est> <link xl:href="http://postgis.refractions.net/"> PostGIS </link>, qui peut être utilisé sur elle-même ou en conjonction 
          avec les applications ci-dessus. 
        </Para> 
</section> 
  </section>
  <section> 
    <title> De conversion des données géographiques à format GeoJSON </title> 
    <para> Le client cartographie DHIS2 repose sur des fichiers GeoJSON pour afficher 
    une carte dans la fenêtre du navigateur. Souvent, les données géographiques est reçu dans 
    de nombreux formats différents, mais le format de fichier de la forme ESRI est l'un des plus 
    commune. Plusieurs procédures sont décrites ci-dessous. Il est important, mais 
    pas nécessaire, que les noms de vos données géographiques correspondent à ceux du 
    DHIS2 hiérarchie organisationnelle. S'ils ne le font pas, vous devrez manuellement 
    les faire correspondre à un étape ultérieure </para> 
    <section> 
      <title> production de fichiers avec GeoJSON> GeoServer </title> 
      <para> GeoServer est capable de produire des formats GeoJSON. Si vous avez 
      GeoServer courir quelque part, vous pouvez exécuter la requête suivante. </para> 
      url <para> ulink <= "http://localhost:8080/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typename=topp:states&outputformat=json&srs_name=EPSG:4326" > http://localhost:8080/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typename=topp:states&outputformat=json&srs_name=EPSG:4326 </link> </para> 
      <para> Prenez note que vous avez besoin de spécifier le système de coordonnées spatiales. Par défaut, GeoServer reviendra fichiers GeoJSON avec le format "long / lat», tandis que 
le client s'attend à ce que la cartographie DHIS l'ordre des coordonnées "lat / long format". La déclaration explicite du système de référence spatiale fera en sorte que les coordonnées sont retournés dans le bon ordre. Au moment de la rédaction, le client cartographie DHIS ne supporte pas les systèmes de référence spatiale autre que EPSG 4326. Si vous utilisez GeoServer, l'application se chargera de la reprojection du format natif des données géographiques à EPSG 4326. Si vous utilisez d'autres méthodes décrites ci-dessous pour générer le fichier GeoJSON, vous devrez veiller à ce que la sortie est fixé à GeoJSON EPSG 4326 (géographique lat / long). </Para> 
      <para> Vous aurez besoin d'ajuster la destination d'accueil, si la machine n'est pas 
      votre machine locale ainsi que la définition de la couche réelle dans GeoServer 
      qui devrait être sortie à GeoJSON (dans ce cas 
      Topp <parameter>: Etats </parameter>).</para> 
      <para> Lors de l'exécution de l'URL, GeoServer va produire un fichier GeoJSON, 
      et il vous sera demandé pour l'enregistrer. Une fois qu'il a fini le téléchargement, 
      renommez le fichier suivant la convention de nommage proposé: </para> 
      <para> ISO2CountryCode suivie d'un trait de soulignement, suivie par la couche 
      type (par exemple, "admin" pour les niveaux administratifs, la «santé» pour la santé 
      les limites administratives). Par exemple, la première couche administrative 
      pour la Zambie serait nommé> "zm_admin1". </para> 
</section> 
    <section> 
      <title> production de fichiers avec GeoJSON> GDAL </title> 
      <para> GDAL est une boîte à outils multi-plate-forme pour la manipulation de 
      données géographiques. Il est librement disponible pour un large éventail de plates-formes 
      à url="http://gdal.org"> <ulink> http://gdal.org </link> </para> 
      <para> production de fichiers GeoJSON sont simples avec GDAL. Juste 
      execute (sur Windows) </para> 
      <programlisting> <userinput> ogr2ogr.exe-f "GeoJSON" src_datasource_name dst_datasource_name </userinput> </programlisting> 
      <para> ou sur Linux <programlisting> <userinput> ogr2ogr-f "GeoJSON" src_datasource_name dst_datasource_name  </userinput> </programlisting> </para> 
      <para> Remplacez <parameter>dst_datasource_name  </parameter> par le chemin 
      à la destination du fichier de données géographiques (ci-après la nomination 
      Convention décrit ci-dessus) et   <parameter> Src_datasource_name </parameter> avec l'origine géographique 
      fichier de données. Prenez note que vous pourriez avoir besoin de préciser d'entrée et de sortie des systèmes de coordonnées tel que décrit ci-dessus. </Para> 
</section> 
    <section>
      <title> Copie de fichiers sur l'application DHIS </title> 
      <para> Actuellement, vos fichiers GeoJSON doivent être placés dans le 
      DHIS_HOME / geoson de votre demande DHIS d'être accessible à la SIG 
      module. Si le répertoire GeoJSON n'existe pas, vous aurez besoin pour créer 
      manuellement et copier vos fichiers GeoJSON là. </para> 
</section> 
  </section>
  <section xml:id="gisAdministration">
    <title> Panneau d'administration / title> 
    <screenshot> 
      <graphic fileref="resources/images/GIS/admin_panel.png" width="270px" align="center"/> 
    <screenshot/> 
    <itemizedlist> 
      <listitem> 
        <para> Carte source </para> 
        <para> <guilabel> fichiers GeoJSON: </> guilabel vous trouverez votre propre 
                cartes enregistrées dans la feuille de zone de liste déroulante dans le panneau de la carte thématique. 
                > La boîte à cocher Admin panneaux seront visibles. </Para> 
        <para> <guilabel> Shapefiles: </> guilabel même que les fichiers GeoJSON, sauf que les fichiers sont générés à partir des fichiers de formes installées sur votre exécutant la version de GeoServer à la volée. </para> 
        <para> <guilabel> DHIS base de données: </guilabel> Carte de la zone de liste déroulante sera 
                simplement être rempli par l'unité d'organisation existants et les niveaux 
                GeoJSON fichiers seront créés par l'application automatiquement 
                Organisation des unités doivent avoir les coordonnées stockées dans la base de données 
                Afin d'être affichés dans la carte. Cette fonction est principalement destiné 
                pour le niveau de l'installation car il est facile à maintenir et va donc 
                shapefiles offrir une mise à jour. </para> 
      </Listitem> 
      <listitem> 
        <para> panneaux Admin: afficher / masquer les panneaux de gestion shapefile. </para> 
      </Listitem> 
      <listitem> 
        <para> longitude / latitude: La base de la coordination pour le pays actuellement. Cette coordination apparaît par défaut lorsque> Cartes enregistrement et de superpositions. </Para> 
      </Listitem> 
    </Itemizedlist> 
  </section>
<section xml:id="gisMap">
    <title> Enregistrement d'information géographique </title> 
    <para> Afin de visualiser les données dans le module SIG, vous devez importer votre 
    données géographiques dans votre installation DHIS. Une fois que vous avez produit 
    GeoJSON fichiers selon la procédure ci-dessus, et les a importés dans la 
    système, vous devrez établir une correspondance entre les 
    l'information dans la base de données DHIS, et le fichier GeoJSON. </para> 
    <screenshot> 
      Inscrivez-<title> géodonnées de configuration </title> 
      <mediaobject> 
        <imageobject> 
          width="60%" <imagedata align="center" fileref="resources/images/GIS/register_geodata.png"/> 
        <imageobject/> 
      <mediaobject/>
    <screenshot/> 
    <itemizedlist> 
      <listitem> 
        <para> <guilabel> Nom d'affichage: </guilabel> Représente votre carte dans la zone de liste déroulante Carte dans le panneau de la carte thématique. </para> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> niveau de l'unité d'organisation: </guilabel> Le niveau des unités d'organisation affiché dans le fichier GeoJSON. </para> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> Carte du fichier source: </guilabel> Le nom du fichier GeoJSON. Ces fichiers doivent être placés dans le 
          dossier GeoJSON / cartographie. Utilisez par exemple GeoServer 2.0 (actuellement en RC1) à 
          facilement produire GeoJSON de votre shapefiles. </para> 
      </Listitem> 
      <listitem> 
        <para><guilabel>la colonne Nom: </guilabel> La colonne de données shapefile (sensible à la casse!) qui seront 
          comparées DHIS noms unité d'organisation. Si vous avez un 
          instance de GeoServer installé, vous pouvez afficher la couche à travers le 
          intégré dans le client OpenLayers. Cliquez sur un domaine particulier, et le 
          domaines possibles sera affichée. </para> 
        <screenshot> 
          <title> d'identification de la colonne de nom avec GeoServer OpenLayers la clientèle </title>
          <mediaobject> 
            <imageobject> 
              width="583px" <imagedata align="center" fileref="resources/images/GIS/get_name_geoserver.png"/> 
            <imageobject/> 
          <mediaobject/>
        <screenshot/> 
        <screenshot> 
          <title> D'identification de la colonne nom directement dans le fichier GeoJSON</title>
          <mediaobject> 
            <imageobject> 
              width="383px" <imagedata align="center" fileref="resources/images/GIS/get_name_geojson.png"/> 
            </imageobject> 
          </mediaobject>
        </screenshot> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> longitude / latitude: </guilabel> La longitude et la latitude par rapport au point approximative 
          où la carte sera centrée après avoir rendu. Si vous avez 
          GeoServer cours d'exécution, vous pouvez afficher la couche par l'intégration 
          OpenLayers client et de déterminer un point central bon pour votre carte. 
          Vous pouvez également utiliser le fond de carte du module DHIS SIG, et 
          déterminer un emplacement approximatif. Vous pouvez essayer un peu 
          avec le point central et le niveau de zoom afin de l'obtenir 
          correct. </para> 
        <screenshot> 
          <title> Utilisation GeoServer OpenLayers client pour obtenir le point central de la carte</title>
          <mediaobject> 
            <imageobject> 
              width="386px" <imagedata align="center" fileref="resources/images/GIS/geoserver_center_point.png"/> 
            </imageobject> 
          </mediaobject>
        </screenshot> 
        <screenshot> 
          <title> Utilisation DHIS module SIG pour obtenir le point central de la carte </title>
          <mediaobject> 
            <imageobject> 
              width="124px" <imagedata align="center" fileref="resources/images/GIS/dhis_gis_center_point.png"/> 
            </imageobject> 
          </mediaobject>
        </screenshot> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> Zoom: </guilabel> Le niveau de zoom dans la mesure où les contrôles de la carte. Certains 
          essais seront nécessaires pour obtenir le zoom niveau correct. 
          Commencez avec une valeur de "7" et augmenter ou diminuer le niveau de zoom 
          en fonction de l'étendue de la carte qui doit être affiché. </para> 
      </Listitem> 
    </Itemizedlist> 
  </section>
 <section xml:id="gisMapOrganisationUnitRelation">
  <title> Attribuer à carte unités organisation</title> 
    <para> Sélectionnez une carte enregistrée et attendre qu'il se charge. L'organisation 
    unités (UO) dans votre base de données à ce niveau apparaîtra dans la liste et 
    couleurs apparaissent dans la carte. Ce que nous voulons faire ici, c'est la création 
    les relations entre les unités d'organisation dans la base de données et les unités d'organisation correspondante dans le 
    shapefile. Cela est souvent nécessaire en raison d'incohérences dans le 
    nommer dans les données géographiques, et ce qui est présent dans la base de données DHIS. 
    Premièrement, essayez d'auto-affectation à la barre d'outils en bas de laisser le lien vers une application 
    les unités d'organisation avec un nom correspondant à OU dans le shapefile. Les polygones qui restent 
    blanc, vous aurez pour relier manuellement en sélectionnant d'abord une unité d'organisation dans le blanc 
    cliquez sur la liste, puis l'unité d'organisation correspondante dans la carte. </para> 
    <screenshot> 
      <title> Attribution des unités d'organisation à la carte </title> 
      <mediaobject> 
        <imageobject> 
          <imagedata width="80%" align="center" fileref="resources/images/GIS/assign_org_units.png"/> 
        <imageobject/> 
      <mediaobject/>
    <screenshot/> 
    <para> Le bouton "Supprimer" à la barre d'outils bouton supprime le sélectionnés OU's 
    lien. Le bouton Supprimer tout supprime tous les liens pour l'unité sélectionnée 
    carte. </para> 
  </section>
  <section xml:id="gisOverlay"> 
    <title> Inscrivez-superpositions </title> 
    Superpositions <para> sont des couches géographiques qui n'ont pas de lien direct 
    des données dans la base de données. Exemple comprennent les routes, les rivières, les aéroports, les ports, 
    et d'autres informations géographiques que vous pouvez afficher sur votre 
    la carte, mais ce n'est pas lié neccsarily données contenues dans les OT DHIS 
    base de données. Le registre <guimenu> Overlay </configuration> guimenu vous permettra de 
    Ajouter de nouvelles couches et de déterminer comment ils seront représentés visuellement sur le 
    carte. </Para> 
    <itemizedlist> 
      <listitem> 
        <para> <guilabel> Nom d'affichage: </guilabel> Représentez votre superposition de 
        l'arbre couche dans le coin supérieur droit. </para> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> Carte du fichier source: </guilabel> Le fichier GeoJSON 
        nom. </para> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> couleur de remplissage: </guilabel> Décide la couleur de remplissage si le 
        couche est une couche de polygones. </Para> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> l'opacité: </guilabel> Sélectionnez un niveau d'opacité 
        entre 0 (invisible) et> 1 (solide). </para> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> maladies couleur: </guilabel> La couleur du trait sur les lignes 
        et les frontières des polygones. </para> 
      </Listitem> 
      <listitem> 
        <para> <guilabel> maladies largeur: </guilabel> Choisissez une largeur de trait entre 
        0 et 4. </Para> 
      </Listitem> 
    </Itemizedlist> 
  </section>
  <section xml:id="gisThematicMap">  <title> Carte thématique </title> 
    <para> Ce panneau vous permet d'utiliser vos cartes enregistrées pour la cartographie thématique. Tout ce que vous devez faire est de sélectionner la combinaison souhaitée indicateur-période-carte dans le menu de gauche. </Para> 
    <para> Méthode de calcul 
    fait allusion à la taille des classes légende. Réglez <guimenuitem> égalité des intervalles </guimenuitem> elles seront «plus haute valeur la carte - la carte la plus faible valeur 
    / Nombre de classes ». Réglez <guimenuitem> égalité count groupe </guimenuitem> le créateur légende vais essayer de répartir les unités d'organisation uniforme. Choisir <guimenuitem> Fixe des limites </guimenuitem> et 
    Vous pouvez définir vos propres valeurs du seuil de classe, par exemple, "20,40,60" utilisant une virgule pour séparés chacun d'eux. </para> 
    <para> La vue sur la carte fenêtre liste toutes vues carte (favoris) enregistré par l'utilisateur. Les paramètres sont stockés dans la vue sur la carte sera automatiquement appliqué sur le panneau de cartes thématiques. </Para> 
  </section>
  <section xml:id="gisFavoriteMapView"> 
    <title> Registre préférés vues de la carte </title> 
    <para> Cette fenêtre va enregistrer la vue actuelle de la carte thématique afin de 
    le restaurer quand vous le souhaitez via le Voir la carte <guimenuitem> boîte </guimenuitem> combo dans le carte thématique <guimenu> Panneau de configuration </guimenu>. Par 
    ajouter votre point de vue à dhis 2 tableau de bord vous pouvez y accéder par là 
    insérant <guimenuitem> vues carte dans l'un des liens </guimenuitem>
    domaines. </para> 
  </section>
<section xml:id="gisLegendSet"> 
    Inscrivez-ensembles <title> légende </title> 
    <para> Un ensemble légende peut être relié à de nombreux indicateurs, mais un indicateur 
    ne peut avoir un jeu de légende. Ainsi, vous pouvez sélectionner de nombreux indicateurs lorsque 
    vous créez une légende indiquée. Quand un indicateur qui a un ensemble légende 
    sélectionné dans la carte thématiques <guimenu> Panneau de configuration </guimenu>, le nombre de 
    classes, couleurs atténuées et la couleur élevée est réglée automatiquement. </para> 
  </section>
<section xml:id="gisPdfPrint">  
    <title> Imprimer carte en PDF> </title> 
    <para> Cliquez sur l'icône PDF sur la barre d'outils et de la carte du panneau latéral gauche d'impression s'ouvre. Vous pouvez ajouter plusieurs pages à votre document PDF en cliquant sur "ajouter une page" sur la barre d'outils inférieure. Modifier la taille du rectangle de focus dans la «grande échelle» de la colonne. Le rectangle peut être tourné par l'insertion, un certain nombre (en degrés) "rotation" colonne ou en faisant glisser le bouton de rotation. Votre titre de la carte »et« commentaire »apparaîtra au-dessus et en dessous de l'image dans le document PDF, respectivement. Le plus "dots per inch" valeur que vous choisissez, la meilleure qualité de l'image et la taille du fichier du document. </para> 
    <para> Pour sortir du mode d'impression, vous pouvez simplement étendre une formation différente ou masquer le panneau d'impression en cliquant sur l'icône PDF dans la barre la carte à nouveau. </para> 
  </section>
</Chapitre>